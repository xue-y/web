<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>滚动公告--滚动小图轮播</title>
<script type="text/javascript" src="jquery.js"></script>
</head>
<body>
	
<script type="text/javascript">
$(function(){

	 function scr_gao(ele,opt){
	    
	    	var defaults={
	    			attr:"margin",
	    			num:1,
	    			zxn:1,
	    			direction:"top",
	    			delay:3000,  // 每次运动的间隔时间
	    			t:500,// 一个元素运动的时间
	    		}

	    	// 元素取值
	 		var not_ul=$(ele).find("ul");
			var not_li=not_ul.find("li");
			var li_len=not_li.length;
			var defalut_v;// 运动完成后停留所在位置	
			var auto_but=true;// 自动播放开关标识

			 // 根据属性不同 设置运动属性
	    	if(opt.direction=="top" || opt.direction=="bottom")
	    	{
	    		var li_v=not_li.eq(0).height(); // 单个子元素属性值
	    		
	    	}else
	    	{
	    		var li_v=not_li.eq(0).width();	
	    		not_ul.css("width",li_v*li_len); // 如果是左右轮播定义容器宽度
	    	}   


	    	var arg=arguments.length;

	    	// 如果没有写选项参数 设置默认参数
	    	if(arg==1)    
	    	{
	    		opt=defaults;
	    	}else
	    	{
		    	// 判断属性是否存在 设置属性值
		    	
		    	if(typeof opt.num=="undefined")
		    	{
		    		opt.num=defaults.num;
		    	}
		    	if(typeof opt.zxn=="undefined")
		    	{
		    		opt.zxn=defaults.zxn;
		    	}
		    	if(typeof opt.direction=="undefined")
		    	{
		    		opt.direction=defaults.direction;
		    	}

		    	if(opt.direction=="top" || opt.direction=="bottom")
		    	{
		    		opt.attr="marginTop";	
		    	}else
		    	{
					opt.attr="marginLeft";
		    	}
		    	if(typeof opt.delay=="undefined")
		    	{
		    		opt.delay=defaults.delay;
		    	}
		    	if(typeof opt.t=="undefined")
		    	{
		    		opt.t=defaults.t;
		    	}
			}

			opt.t*=opt.num;// 运动花费的时间
			
	    	//如果最外面的包裹元素是展现多个子元素，但运动的是一个子元素
	    	if(parseInt(opt.zxn) > parseInt(opt.num))
	    	{
	    		var chazhi=parseInt(opt.zxn)-parseInt(opt.num);
			}
			// 如果展现的个数 小于 运动元素的个数
			if(parseInt(opt.zxn) < parseInt(opt.num))
			{
				opt.zxn=opt.num;
			}
    		if(opt.direction=="top" || opt.direction=="bottom")
    		{
    			$(ele).height(opt.zxn*li_v); // 最外面元素的高度、宽度
    		}else
    		{

    			$(ele).width(opt.zxn*li_v); // 最外面元素的高度、宽度
    		}
	    	
			 // 设置初始默认值
			 if(opt.direction=="bottom" || opt.direction=="right")
	    	 {	    	 		    	 
	    	  	var yun_v=-(li_len-opt.num-chazhi)*li_v;// 一次运动的距离
			 	    defalut_v=yun_v+opt.num*li_v;  		// 运动完成后所在位置	
	    	 }else
	    	 {
	    	 	   defalut_v=-(li_v*opt.num);
	    	 }

	    	 // 根据属性不同 设置运动属性值 animation 不支持变量
	    	if(opt.direction=="top")
	    	{	    		
	    		attr_css={marginTop:defalut_v}
	    	}else if(opt.direction=="bottom")
	    	{
	    		attr_css={marginTop:0}
	    	}else if(opt.direction=="left")
	    	{
	    		attr_css={marginLeft:defalut_v}
	    	}else 
	    	{
	    		attr_css={marginLeft:0}
	    	}
	    	
	    		
	    	// 执行运动函数
			 function not_src_up(attr_css)
			 {	   
				 not_ul.animate(attr_css,opt.t,'linear',function()
				 {
					not_ul.css(opt.attr,0).find('li').slice(0,opt.num).appendTo(not_ul);
				 });
			 }
			 function not_src_down(attr_css)
			 {		
			 	// 先设定元素 -运动元素一个高度*运动元素个数 ，然后在运动到指定位置
			     not_ul.css(opt.attr,-opt.num*li_v).find('li').slice(-opt.num).prependTo(not_ul);
			     not_ul.animate(attr_css,opt.t,'linear');
			 }
			 var t=null;
			 
			 $(ele).hover(function(){
				 clearInterval(t);
				 },function()
				 {
				 	auot_run();//  自动播放					
			 }).trigger('mouseleave');

			 //  自动播放			
			 function auot_run()
			 {
			 	 t=setInterval(function()
					 {
						
						if(opt.direction=="top" || opt.direction=="left")
						{
							not_src_up(attr_css);  
						}else
						{
							 not_src_down(attr_css);
						}

					 },opt.delay);
			 }

			 // 按钮点击事件
			 if(typeof opt.but!="undefined")
			 {
			 	var attr_css2=null;
			 	if(typeof opt.but.pre !="undefined")
			 	{
			 		$(opt.but.pre).click(function() {
			 			if(t)clearInterval(t);
			 			// 重新定义运动初始值
			 			if(opt.direction=="top" || opt.direction=="bottom")
				    	{	    					    	
				    		attr_css2={marginTop:0}
				    	}else{
				    		attr_css2={marginLeft:0}
				    	}
			 			not_src_down(attr_css2);
			 			auot_run();// 自动播放	
			 		 	
			 		});
			 		
			 	}
			 	if(typeof opt.but.next !="undefined")
			 	{
			 		$(opt.but.next).click(function() {
			 			if(t)clearInterval(t);
			 			// 重新定义运动初始值
			 			if(opt.direction=="top" || opt.direction=="bottom")
				    	{	    					    	
				    		attr_css2={marginTop:-li_v*opt.num}
				    	}else{
				    		attr_css2={marginLeft:-li_v*opt.num}
				    	}
			 			not_src_up(attr_css2); 
			 			auot_run();// 自动播放
			 		});
			 		
			 	}
			 	
			 }
 	 };


	// 调用示例
   var opt={
   		num:1,// 一次运动的个数
   		zxn:3, // 展示的个数
   		but:{
   			next:".next",
   			pre:".pre"
   		},
   		direction:'top',// 运动方向 top bottom left right
   		delay:3000,// 每次运动的间隔
   		t:500,// 一个元素运动的时间
   	}
	scr_gao(".warp",opt);

});
 
</script>

<body>
<style type="text/css">
	*{ padding: 0px; margin:0px; }
	li{list-style: none;}
	 .warp{background-color: #f8f9fb; overflow: hidden;}
	 .warp li{ line-height: 30px } /* bottom top 方向运动 */

	/* .warp{background-color: #f8f9fb;height: 30px; overflow: hidden;}
	.warp ul{ clear: both;}
	.warp li{ line-height: 30px; width:100px; float: left; }    *//* left right 方向运动 */

	.but{margin-top: 20px}
	.but a{margin-left: 20px;}
</style>
	<div class="warp">
		 <ul>
		 	<li>11</li>
		 	<li>22</li>
		 	<li>33</li>
		 	<li>444</li>
		 	<li>55</li>
		 	<li>66</li>
		 	<li>77</li>
		 	<li>88</li>
		 </ul>
	 </div>

	 <div class="but">
	 	<a class="pre">上一个</a>
		<a class="next">下一个</a>
	</div>
</body>
</html>